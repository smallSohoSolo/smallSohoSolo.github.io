---
layout: post
title: "ASM文档翻译"
date: 2017-8-7
category: Android
tag: aop
---

## 2. 章节

这个章节说明了如何使用Core ASM API 生成并且修改编译Java字节码。开始首先介绍字节码的编译，之后指出相应的ASM接口，组件和工具去初始化和修改她们，并且有很多实用的例子。方法，注解和泛型的内容在下一章节说明。

### 2.1. 结构

#### 2.1.1. 概览 

字节码的结构是很简单的。并不像一个编译好的Application，字节码保留了结构信息和大多数的源代码符号。事实上，字节码中包括：

- 类的作用域（例如 public 或 private），名字，父类，接口和注解
- 类中的每一个变量。包括每一个变量的作用域，名称，类型和注解
- 类中的每一个方法和构造函数。每一个部分包括作用域，名称，返回值，参数和注解。并且也包括方法编译后的字节码。

源码和字节码有很多的不同

- 一个字节码文件仅描述一个类，当一个源码文件包含多个类的时候。举个例子一个源码文件中的一个类中包含一个内部类，那么他会被编译成两个字节码文件。一个是主类的，另外一个是内部类的。主类的文件中包含对他内部类的引用，并且非静态的内部类也持有对外部类的引用。
- 字节码文件并不包含注释，但是包含函数类，变量，方法和能被用于关联结构的额外信息的attribute。源于对Java5注解的介绍，对于相同作用的代码，attributes 大多数是没有用的。
- 字节码并不包含package和import的部分，所以所有的类型名称都要被完全的标记。

另一个非常重要的结构上的不同点是字节码中包含常量池。常量池是一个包括所有这个类中的numeric，string或者其他类型的常量的array。这些常量仅仅被定义一次，并且被类的全局持有引用。有幸的是ASM隐藏了所有跟常量池相关的细节问题，所以你不用为此苦恼。